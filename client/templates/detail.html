<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='detail.css') }}"
    />
    <link href="../static/Nav.css" rel="stylesheet" />
    <link href="../static/Footer.css" rel="stylesheet" />

    <!--폰트-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR&family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=Nanum+Gothic&family=Noto+Sans+KR:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR&family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=M+PLUS+1p&family=Nanum+Gothic&family=Noto+Sans+KR:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR&family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=M+PLUS+1p&family=Nanum+Gothic&family=Noto+Sans+KR:wght@100..900&family=Prosto+One&display=swap"
      rel="stylesheet"
    />
    <script src="{{ url_for('serve_component', filename='rating.js') }}"></script>
    <script src="{{ url_for('serve_component', filename='scrap.js') }}"></script>
    <script src="{{ url_for('serve_component', filename='submitreview.js') }}"></script>

    <script
      type="text/javascript"
      src="//dapi.kakao.com/v2/maps/sdk.js?appkey=19283dede40ba3fbe3160877cfa10827"
    ></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var container = document.getElementById("map");
        var options = {
          center: new kakao.maps.LatLng(33.450701, 126.570667),
          level: 3,
        };
        var map = new kakao.maps.Map(container, options);
      });
    </script>
    <!--스크립트-->
    <!--네비게이션 바-->
    <script src="../components/navbar.js"></script>
  </head>
  <body>
    <nav class="navbar">
      <a id="pretrip" href="./index.html">PreTrip</a>
      <ul class="nav-menu mainFunc">
        <li><a href="./spot.html">Spot</a></li>
        <li>
          <a href="./calendar.html">Calendar</a>
        </li>
      </ul>
      <ul class="nav-menu">
        <li><a href="./login.html">Login</a></li>
        <li class="division">|</li>
        <li><a href="./login.html">Sign Up</a></li>
      </ul>
      <a class="nav-toggle" href="javascript:void(0)">
        <i class="fa-solid fa-bars"></i>
      </a>
    </nav>

    <div class="content" id="content">
      <div class="spotsection">
        <img
          class="spotimage"
          src="{{ url_for('static', filename='image/gyungbok.jpeg') }}"
          width="45%"
        />
        <div class="spotinfo">
          <div class="name">{{ spot.name }}</div>
          <div class="type">{{ spot.location }}/{{ spot.type }}</div>
          <div class="description">{{ spot.description }}</div>
          <button
            id="bookmark-button"
            class="bookmark-button"
            style="color: #ffffff"
          >
            스크랩
          </button>
        </div>
      </div>
      <div class="divider"></div>
      <div class="mapsection">
        <div class="map" id="map" style="width: 500px; height: 400px"></div>
      </div>
    </div>

    <div class="reviewsection">
      <!-- 리뷰 섹션 -->
      {% for review in reviews %}
      <div class="review">
        <div class="sentence">{{ review.review }}</div>
        <div class="rating" data-rating="{{ review.rating }}">
          {% for i in range(1, 6) %}
          <span
            class="reviewedstar{% if i <= review.rating %} active{% endif %}"
            data-value="{{ i }}"
            >★</span
          >
          {% endfor %}
        </div>
        <div class="reviewerinfo">
          <div class="reviewername">Reviewer: {{ review.reviewer_name }}</div>
          <div class="reviewerid">ID: {{ review.reviewer_id }}</div>
        </div>
      </div>
      {% endfor %}
      <!-- 리뷰 제출 폼 -->
      <div class="reviewsubmitsection">
        <div class="starrating">
          <span class="star" data-value="1">★</span>
          <span class="star" data-value="2">★</span>
          <span class="star" data-value="3">★</span>
          <span class="star" data-value="4">★</span>
          <span class="star" data-value="5">★</span>
        </div>
        <label for="review-input">리뷰 등록</label>
        <div class="submitsection">
          <input
            type="text"
            id="reviewinput"
            class="reviewinput"
            placeholder="리뷰를 입력하세요"
          />
          <input type="hidden" id="spot-id" value="{{ spot.id }}" />
          <input type="hidden" id="reviewer-id" value="User123" />
          <!-- 실제 사용자 ID로 대체 -->
          <input type="hidden" id="reviewer-name" value="User Name" />
          <!-- 실제 사용자 이름으로 대체 -->
          <button id="submitreview" class="submit">등록</button>
        </div>
      </div>
    </div>
  </body>
</html>
